/*! ClassifyJs Observer v0.10.4 | (c) 2011-2013, Wei Kin Huang | http://classifyjs.com | MIT license | 2013-09-19 */;!function(a,b){"use strict";return a.Classify?(b(a,a.Classify),void 0):"function"==typeof define&&define.amd?(define("classify-observer",["classify"],function(c){return b(a,c),c}),void 0):"undefined"!=typeof module&&module.exports?(b(a,require("classifyjs")),void 0):void 0}(this,function(a,b,c){"use strict";var d=Object.prototype,e=d.toString,f=d.hasOwnProperty,g=function(a){return"[object Function]"===e.call(a)},h=function(a,b,c){a[b]=c},i=function(a){var b,c=[];for(b in a)c[c.length]=b;return c},j=function(a){return Array.prototype.slice.call(a,0)},k=function(a,b,d){if(!a)return a;var e,f,h=0,j=a.length;if(j===c||g(a))for(f=i(a),j=f.length,e=a[f[0]];j>h&&b.call(d||e,e,f[h],a)!==!1;e=a[f[++h]]);else for(e=a[0];j>h&&b.call(d||e,e,h,a)!==!1;e=a[++h]);return a},l=function(){var a=j(arguments),b=a.shift();return k(a,function(a){k(i(a),function(c){b[c]=a[c]})}),b},m=b({context:null,name:null,events:null,writable:null,delay:null,_debounce:null,value:null,getter:null,setter:null,init:function(a,b,c){if(!a)throw new Error("Cannot create Observer without class context.");this.context=a,this.name=b,this.events=[],this.writable=!0,this.delay=0,this._debounce=null,null!==c&&"object"==typeof c?(this.getter=g(c.get)?c.get:null,this.setter=g(c.set)?c.set:null,this.value=c.value,this.writable="boolean"==typeof c.writable?c.writable:!0,this.delay="number"==typeof c.delay?c.delay:0):this.value=c},get:function(){return this.getter?this.getter.call(this.context,this.value):this.value},set:function(a){var b=this.value,c=this.context;return this.writable?(this.value=this.setter?this.setter.call(c,a,b):a,this.value!==b&&this.emit(),c):c},emit:function(){var b=this,c=j(arguments);return this.delay>0?(null!==this._debounce&&a.clearTimeout(this._debounce),this._debounce=a.setTimeout(function(){b._debounce=null,b._triggerEmit(c)},this.delay)):this._triggerEmit(c),this.context},_triggerEmit:function(a){var b=0,c=this.events.length,d=this.context,e=this.events;for(a.unshift(this.value);c>b;++b)e[b].apply(d,a)},addListener:function(a){if(!g(a))throw new Error("Observer.addListener only takes instances of Function");return this.events[this.events.length]=a,this.context},once:function(a){if(!g(a))throw new Error("Observer.once only takes instances of Function");var b=this,c=function(){b.removeListener(c),a.apply(this,arguments)};return c.listener=a,this.addListener(c),this.context},removeListener:function(a){if(!g(a))throw new Error("Observer.removeListener only takes instances of Function");for(var b=this.context,c=this.events,d=-1,e=0,f=c.length;f>e;++e)if(c[e]===a||c[e].listener&&c[e].listener===a){d=e;break}return 0>d?b:(c.splice(e,1),b)},removeAllListeners:function(){return this.events=null,this.events=[],this.context},listeners:function(){return this.events},toValue:function(){return this.value&&this.value.toValue?this.value.toValue():this.value},toString:function(){return"[observer "+this.name+"]"}});m.prototype.on=m.prototype.addListener,b.addMutator("observable",{onCreate:function(a,b){var c=this;a.observable=l({},b.observable||{}),a.addObservableProperty=function(b,d){return a.addProperty(b,d,c.propPrefix)},a.removeObservableProperty=function(b){return a.removeProperty(c.propPrefix+b)}},onPropAdd:function(a,b,c,d){a.observable[c]=d,h(a.prototype,c,null),k(a.subclass,function(a){f.call(a.observable,c)||a.addObservableProperty(c,d)})},onPropRemove:function(a,b){var c=a.observable[b];k(a.subclass,function(a){a.observable[b]===c&&a.removeObservableProperty(b)}),a.observable[b]=null;try{delete a.observable[b]}catch(d){}},onInit:function(a,b){var c,d=b.observable||null;if(null!==d)for(c in d)f.call(d,c)&&(a[c]=new m(a,c,d[c]))}}),b.Observer=m});
//# sourceMappingURL=classify-observer.min.map